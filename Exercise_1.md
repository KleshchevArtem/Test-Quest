<p align="center">
<font size = 6> Описание контейнерного инструмента Grafana </font>
</p>

---------

**Grafana** — свободная программная система визуализации данных, ориентированная на данные систем ИТ-мониторинга. Реализована как веб-приложение в стиле дашбордов с диаграммами, графиками, таблицами, предупреждениями.
Подключается к системе запроса метрик Prometeus, с источником данных системы оркестрации Kubernetes. Позволяет строить сложные панели мониторинга с помощью интерактивных запросов.

----

>Ничего не понятно? Сейчас разберемся!

Мониторинг – важный инструмент для организации надежности информационных систем контейнеризации и оркестрации, но следует начать с самого начала.

Раньше, когда бизнес и онлайн только начинали развиваться, приложения запускали на физических, железных серверах и не было возможности разграничивать их ёмкость. Например, на сервере расположены три приложения, одно из них съедает большую часть ресурсов из-за этого два других работают хуже. Решение проблемы – запускать каждое приложение на отдельном сервере. Но это не масштабируемо и поддержка такого количества серверов – дорого. 

Для решения задач масштабирования и более рационального расходования ресурсов была создана технология виртуальных серверов – запуск нескольких виртуальных машин на одном физическом сервере. Таким образом ресурсы сервера разделяются на части, приложение стали изолированы друг от друга, что обеспечило более высокий уровень безопасности, поскольку информация одного приложения перестала быть доступна другим приложениям. Арендовать виртуальный сервер проще и дешевле чем покупать свой собственный физический. В больших компаниях заметно сократились расходы на инфраструктуру. У такой системы есть недостаток – на виртуальной машине запускается ядро операционной системы и для каждого приложения запускать свою операционную систему довольно затратно. Это привело к созданию технологии контейнеров.

**Контейнер** – это обособленное окружение со всем необходимым для запуска приложения в любой операционной системе. Контейнеры так же, как и виртуальные машины позволяют запускать каждое приложение изолированно друг от друга, но в отличие от виртуалок они не запускают операционку под каждое приложение.

Подобно виртуальной машине контейнер имеет свою собственную файловую систему, процессор, память, пространство процессов и многое другое. Поскольку они не связаны с базовой инфраструктурой они переносимы между облаками и дистрибутивами операционной системы.

Контейнеры стали популярными из-за таких дополнительных преимуществ как:
* гибкое создание и развёртывание приложений: простота и эффективность создания образа контейнера по сравнению с использованием образа виртуальной машины;
* непрерывная разработка, интеграция и развёртывани: обеспечивает надежную и частую сборку и развёртывание образа контейнера с быстрым и простым откатом;
* разделение задач между Dev и Ops: создание образов контейнеров приложении во время сборки/релиза, а не во время развертывания, тем самым отделяя приложения от инфраструктуры;
* наблюдаемость охватывает не только информацию и метрики на уровне операционной системы, но также информацию работоспособности приложений;
* идентичные окружающая среда при разработке тестирования и релизе (на ноутбуке работает так же, как и в облаке);
* переносимость облачных и операционных систем (работает в любых средах);
* слабосвязанные, распределённые, гибкие, выделенные микросервисы (приложение разбито на более мелкие независимые части, которые можно динамически развёртывать и управлять);
* изоляция ресурсов: предсказуемая производительность приложения;
* высокая эффективность и компактность.

Контейнеры – хороший способ связать и запустить приложения. В производственной среде необходимо управлять контейнерами, которые запускают приложения и гарантировать отсутствие простоев, например, если контейнер выходит из строя необходимо запустить другой контейнер, вот тут на помощь приходит оркестратор контейнеров **Kubernetes**.

Kubernetes занимается масштабированием и обработкой ошибок в приложении предоставляет шаблоны развёртывания и многое другое. Его работа напоминает работу дирижера в оркестре – отсюда и условное название – оркестратор.

Kubernetes предоставляет:
* мониторинг сервисов и распределения нагрузки. Kubernetes может обнаружить контейнер используя имя DNS или собственный IP адрес, если траффик в контейнере высокий Kubernetes сможет сбалансировать нагрузку и распределить сетевой трафик, чтобы развёртывание было стабильно;
* оркестрацию хранилища. Kubernetes позволяет автоматически смонтировать систему хранения по вашему выбору такую как локальное хранилище провайдеры общедоступного облака и многое другое;
* автоматическое развёртывание и откаты. Используя Kubernetes можно описать, изменить фактическое состояние развернутых контейнеров и изменить фактическое состояние на желаемое, например, вы можете автоматизировать Kubernetes на создание новых контейнеров для развёртывания/удаления существующих контейнеров и распределения всех ресурсов в новый контейнер;
* автоматическое распределение нагрузки. Вы предоставляете Kubernetes кластер узлов который он может использовать для запуска контейнерных задач. Вы указываете сколько ЦП и памяти требуется каждому контейнеру, Kubernetes сможет разместить контейнеры ваших узлах так чтобы наиболее эффективно использовать ресурсы;
* самоконтроль. Kubernetes перезапускает отказавшие контейнеры, заменяет и завершает работу контейнеров, которые не проходят определённые пользователем проверки работоспособности и не показывает их клиентам, пока они не будут готовы к обслуживанию;
* управление конфиденциальной информацией и конфигурацией. Kubernetes может хранить и управлять конфиденциальной информацией, такой как пароли, токены и ключи SSH. Вы можете развёртывать и обновлять конфиденциальную информацию и конфигурацию приложения без изменений образов контейнеров и не раскрывая конфиденциальную информацию в конфигурации стека.

Несмотря на такой функционал Kubernetes, очень важно контролировать работу серверов, контейнеров, приложений, потребление ресурсов и другие процессы в системе.

Система мониторинга **Prometheus** – это бесплатная система серверов и программ, предназначенная для сбора и анализа данных о работоспособности информационных систем, хранящая данные в виде временных рядов. Сервис собирает данные о состоянии серверов и систем, оповещая о возникших проблемах. 
Главное отличие Prometheus от остальных систем мониторинга – метод сбора данных. Обычно объекты мониторинга отправляют нужные параметры серверам мониторинговых программ. Prometheus же наоборот – сам берёт нужную ему информацию с серверов и устройств, обращаясь к целевым объектам. Сервер Prometheus считывает параметры целевых объектов с интервалами, которые задаёт пользователь. Данные от целевых объектов передаются на сервер и хранятся в базе данных временных рядов.

Работа с Prometheus не обойдётся без дополнения **Grafana** – с его помощью можно визуализировать полученные данные в виде наглядных графиков, диаграмм и таблиц – дашбордов (dashboard).


Grafana — это платформа с открытым исходным кодом для визуализации, мониторинга, сбора статистики и анализа данных. Используется для представления в графическом виде временных рядов и текстовых данных. Этот инструмент, в сочетании с Prometheus, —двухсторонней системы мониторинга системы.
Основная функция Grafana — создания аналитических дашбордов. Данные для дашбордов берутся из подключённых источников: базы данных, рекламные кабинеты, используемые облачные сервисы и другие источники данных, с которыми можно синхронизироваться. Для создания новой панели на дашборде необходимо выбрать подключаемый источник, выбрать графический способ отображения данных, запросом или перетаскиванием нужных столбцов с данными. Выводить на экран можно панели с графиками, диаграммами, различного вида шкалами, таблицы, данные карт и другие визуальные элементы. 

Особенности Grafana:
* создание информационной панели на основе данных;
* поддержка разных источников: бд, сервисы, кабинеты, api и т. д.;
* настройка уведомлений на изменение данных на панелях;
* публикация дашборда для компании или общественности;
* подключение плагинов из других облачных сервисов;
* различные типы визуализации данных.

----

Некоторые возможности Grafana:
![Пример возможностей](https://habrastorage.org/r/w1560/getpro/habr/post_images/8eb/cd6/400/8ebcd64009c1c3d24da9cf707e524d01.png)

-----
Grafana + Prometheus:
![Grafana + Prometheus](https://sbcode.net/grafana/img/prometheus-dashboard.jpg)