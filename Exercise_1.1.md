<p align="center">
<font size = 6> Описание контейнерного инструмента Grafana </font>
</p>

---------

#### 1. Что такое Grafana 
Как следует из [Википедии](https://ru.wikipedia.org/wiki/Grafana "страница Wikipedia с определением Grafana"): **Grafana** — свободная программная система визуализации данных, ориентированная на данные систем ИТ-мониторинга. Реализована как веб-приложение в стиле дашбордов с диаграммами, графиками, таблицами, предупреждениями.
Подключается к системе запроса метрик Prometeus, с источником данных системы оркестрации Kubernetes. Позволяет строить сложные панели мониторинга с помощью интерактивных запросов.

Информация на странице Википедии написана сухо, скупо и не позволяет в полной мере понять, что это за программа, как она связана с технологией контейнеров, да и что это за технология такая. Очевидно, для полного понимания, этой информации не достаточно. 

Разберемся в теме, погрузимся немного глубже в историю и попытаемся выяснить:
+ историю и причины появления контейнеров;
+ что такое контейнеры и для чего они нужны;
+ что такое оркестратор Kubernetes и как он связан с контейнерами;
+ при чем тут Прометей;
+ и наконец: так что же такое Grafana.
  
#### 2. Немного истории
  1. Эра традиционного развертывания
Раньше, когда бизнес и онлайн только начинали развиваться, приложения запускали на физических, железных серверах и не было возможности разграничивать их ёмкость (одно приложение могло использовать гораздо больше ресурсов чем другие приложения и мешать их работе). Решение проблемы – запускать каждое приложение на отдельном сервере. Но это не масштабируемо и поддержка множества серверов – дорого. 

  2. Эра виртуального развертывания
Для решения задач масштабирования и более рационального расходования ресурсов была создана технология виртуальных серверов – запуск нескольких виртуальных машин на одном физическом сервере. Таким образом ресурсы сервера разделяются на части, приложение стали изолированы друг от друга, что обеспечило более высокий уровень безопасности, поскольку информация одного приложения перестала быть доступна другим приложениям. Арендовать виртуальный сервер проще и дешевле чем покупать свой собственный физический. В больших компаниях заметно сократились расходы на инфраструктуру. 

3. Эра контейнерного развертывания
У системы виртуальных серверов есть недостаток – на виртуальной машине запускается ядро операционной системы и для каждого приложения запускать свою операционную систему довольно затратно. Это привело к созданию технологии контейнеров.

#### 3. Контейнеризация
**Контейнер** – это обособленное окружение со всем необходимым для запуска приложения в любой операционной системе. Контейнеры так же, как и виртуальные машины позволяют запускать каждое приложение изолированно друг от друга, но в отличие от виртуалок они не запускают операционку под каждое приложение.

Подобно виртуальной машине контейнер имеет свою собственную файловую систему, процессор, память, пространство процессов и многое другое. Поскольку они не связаны с базовой инфраструктурой они переносимы между облаками и дистрибутивами операционных систем.

 Дополнительные преимущества контейнеров:
* создать контейнер и использовать его проще, чем виртуальный сервер;
* создание контейнеров приложений не только во процессе развертывания, но и во время сборки/релиза;
* можно получить информацию и метрики не только на уровне операционной системы, но также информацию работоспособности самих приложений;
* окружающая среда на ноутбуке такая же, как и в облаке на всех этапах;
* совместимость облачных и операционных систем (работает в любых средах);
* приложение разбито на мелкие независимые части - микросервисы, которыми можно отдельно управлять;
* предсказуемая производительность приложения из-за изоляции ресурсов.

Технология контейнеризации связывает и запускает приложения. Но существует необходимость управления контейнерами и исключение ситуаций простоя: при выходе контейнера из строя - запуск другого контейнера. Для этих задач существет инструмент - оркестратор контейнеров **Kubernetes**.

#### 4. Kubernetes
Kubernetes масштабирует процессы, предоставляет шаблоны развёртывания, обрабатывает ошибки в приложениях и многое другое. Его работа напоминает работу дирижера в оркестре – отсюда и условное название – оркестратор.

Kubernetes позволяет:
* находить контейнеры по их уникальным номерам - IP адресам;
* распределять траффик при высокой нагрузке;
* автоматически разворачивать новые контейнеры при нехватке ресурсов/высокой нагрузке, и удалять лишние при восстановлении траффика;
* автоматически монтировать систему хранения - локальное хранилище, облака и другое;
* изменять фактическое состояние развернутых контейнеров;
* эффективно использовать указанные пользователем ресурсы - ЦП и память; 
* перезапускать отказавшие контейнеры;
* хранить и управлять конфиденциальной информацией, такой как пароли, токены и ключи.
  
Несмотря на широкий функционал Kubernetes, очень важно контролировать работу серверов, контейнеров, приложений, потребление ресурсов и другие процессы в системе.

#### 4. Prometheus
**Prometheus** – это целая система программ мониторинга, она собирает данные о работоспособности информационных систем, таких как Kubernetes, и позволяет проводить анализ этих данных.
 
Prometheus берёт нужную информацию с серверов и устройств, считывает параметры целевых объектов с установленными интервалами, передает на сервер и хранит эти данные в базе данных временных рядов

Работа с Prometheus не обойдётся без дополнения **Grafana** – с его помощью можно визуализировать полученные Prometheus данные в виде наглядных графиков, диаграмм и таблиц – дашбордов (dashboard).

#### 4. Grafana
Grafana — приложение для визализации и аналитики информационных систем. 

Grafana позволяет:
+ визуализировать процессы и данные;
+ вести онлайн мониторинг;
+ собирать статистику;
+ проводить анализ данных. 

Основная функция Grafana — создания аналитических панелей - дашбордов. Данные для дашбордов берутся из подключённых источников: базы данных, рекламных кабинетов, облачных сервисов и других источников данных. 

Grafana в сочетании с Prometheus образуют двухстороннюю систему мониторинга. Grafana использует временные ряды и текстовые данные Prometheus и представляет их в графическом виде.

Особенности Grafana:
* создание информационной панели на основе данных;
* поддержка разных источников: бд, сервисы, кабинеты, api и др.;
* настройка уведомлений на изменение данных на панелях;
* публикация дашборда для внутреннего пользования или открытого;
* подключение плагинов из других облачных сервисов;
* различные типы визуализации данных.

Выводить на экран можно панели с графиками, диаграммами, различного вида шкалами, таблицы, данные карт и другие визуальные элементы. 

В Grafana можно создавать множество различных панелей:
* [временные ряды;](https://grafana.com/static/img/docs/time-series-panel/time_series_small_example.png "Пример отображения панели Временные ряды")
* [временная шкала состояния;](https://grafana.com/static/img/docs/v8/state_timeline_strings.png "Пример отображения панели Временная шкала состояния")
* [история состояния;](https://grafana.com/static/img/docs/status-history-panel/status-history-example-v8-0.png "Пример отображения панели История состояния")
* [столбчатая диаграмма;](https://grafana.com/static/img/docs/bar-chart-panel/barchart_small_example.png "Пример отображения панели Столбчатая диаграмма")
* [гисторамма;](https://grafana.com/static/img/docs/histogram-panel/histogram-example-v8-0.png "Пример отображения панели Гистограмма")
* [круговая диаграмма;](https://grafana.com/static/img/docs/pie-chart-panel/pie-chart-example.png "Пример отображения панели Круговая диаграмма")
* [датчи, в простонародье - спидометр;](https://grafana.com/static/img/docs/v66/gauge_panel_cover.png "Пример отображения панели Спидометр")
* и множество других.

----

#### 5. Некоторые примеры мониторинга Kubernetes

Мониторинг кластеров (clusters), нод (nodes), под (podes) Kubernetes:
![Пример возможностей](https://grafana.com/media/solutions/kubernetes/kubernetes-monitoring-in-grafana-landing.png)

Все узлы в кластере:
![Пример возможностей](https://grafana.com/media/solutions/kubernetes/kubernetes-monitoring-in-grafana-nodes.png)

Мониторинг ресурсов для оптимизации ресурсов:
![Пример возможностей](https://grafana.com/media/solutions/kubernetes/kubernetes-monitoring-resource-utilization-efficiency-dashboard.png)

Grafana + Prometheus:
![Grafana + Prometheus](https://sbcode.net/grafana/img/prometheus-dashboard.jpg)